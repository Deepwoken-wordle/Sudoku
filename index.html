<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Random Sudoku Generator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #f5f5f5;
    }

    h1 {
        margin-top: 20px;
    }

    table {
        border-collapse: collapse;
        margin: 20px auto;
    }

    td {
        width: 40px;
        height: 40px;
        border: 1px solid #444;
        font-size: 20px;
        text-align: center;
        vertical-align: middle;
        background: white;
    }

    /* Thicker borders for 3x3 blocks */
    tr:nth-child(3n) td {
        border-bottom: 2px solid black;
    }
    td:nth-child(3n) {
        border-right: 2px solid black;
    }
    tr:first-child td {
        border-top: 2px solid black;
    }
    td:first-child {
        border-left: 2px solid black;
    }

    select, button {
        padding: 8px 12px;
        margin: 10px;
        font-size: 16px;
    }
</style>
</head>
<body>

<h1>Random Sudoku Generator</h1>

<select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
</select>

<button onclick="generateSudoku()">Generate</button>

<table id="sudoku"></table>

<script>
const SIZE = 9;
let grid = [];

/* Utility functions */
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function isSafe(row, col, num) {
    for (let x = 0; x < SIZE; x++) {
        if (grid[row][x] === num || grid[x][col] === num) return false;
    }

    let startRow = row - row % 3;
    let startCol = col - col % 3;

    for (let r = 0; r < 3; r++) {
        for (let c = 0; c < 3; c++) {
            if (grid[startRow + r][startCol + c] === num) return false;
        }
    }
    return true;
}

function fillGrid() {
    for (let row = 0; row < SIZE; row++) {
        for (let col = 0; col < SIZE; col++) {
            if (grid[row][col] === 0) {
                let numbers = shuffle([1,2,3,4,5,6,7,8,9]);
                for (let num of numbers) {
                    if (isSafe(row, col, num)) {
                        grid[row][col] = num;
                        if (fillGrid()) return true;
                        grid[row][col] = 0;
                    }
                }
                return false;
            }
        }
    }
    return true;
}

function removeNumbers(level) {
    let removals;
    if (level === "easy") removals = 35;
    if (level === "medium") removals = 45;
    if (level === "hard") removals = 55;

    while (removals > 0) {
        let row = Math.floor(Math.random() * SIZE);
        let col = Math.floor(Math.random() * SIZE);
        if (grid[row][col] !== 0) {
            grid[row][col] = 0;
            removals--;
        }
    }
}

function drawGrid() {
    const table = document.getElementById("sudoku");
    table.innerHTML = "";

    for (let r = 0; r < SIZE; r++) {
        let row = document.createElement("tr");
        for (let c = 0; c < SIZE; c++) {
            let cell = document.createElement("td");
            cell.textContent = grid[r][c] === 0 ? "" : grid[r][c];
            row.appendChild(cell);
        }
        table.appendChild(row);
    }
}

function generateSudoku() {
    grid = Array.from({ length: SIZE }, () => Array(SIZE).fill(0));
    fillGrid();
    const difficulty = document.getElementById("difficulty").value;
    removeNumbers(difficulty);
    drawGrid();
}

// Generate one on load
generateSudoku();
</script>

</body>
</html>
